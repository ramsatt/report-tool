<div class="slide-container">
    <header>
        <div class="header-left">
            <div class="logo-box">
                <svg viewBox="0 0 24 24" fill="white" width="24" height="24">
                    <path d="M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20ZM13,7H11v6l5.2,3.1.8-1.3L13,12.3Z"/>
                </svg>
            </div>
            <div class="header-text">
                <h1>DEFECTION METRICS</h1>
                <p>Enterprise Execution Benchmarking</p>
            </div>
        </div>
        <div class="header-right">
            <div class="cycle-pill">{{data?.generalInfo?.month}} / {{data?.generalInfo?.year}}</div>
        </div>
    </header>

    <div class="kpi-strip">
        <div class="kpi-card glass">
            <div class="kpi-icon" style="background: #eff6ff; color: #1e40af;">
                <i class="fa-solid fa-bug"></i>
            </div>
            <div class="kpi-data">
                <div class="kpi-value">{{totalVolume}}</div>
                <div class="kpi-label">TOTAL VOLUME</div>
            </div>
        </div>
        <div class="kpi-card glass">
            <div class="kpi-icon" style="background: #fef2f2; color: #b91c1c;">
                <i class="fa-solid fa-bolt"></i>
            </div>
            <div class="kpi-data">
                <div class="kpi-value">{{highestResolutionSprint}}</div>
                <div class="kpi-label">PEAK RESOLUTION</div>
            </div>
        </div>
        <div class="kpi-card glass">
            <div class="kpi-icon" style="background: #ecfdf5; color: #047857;">
                <i class="fa-solid fa-check-double"></i>
            </div>
            <div class="kpi-data">
                <div class="kpi-value">{{stabilityIndexValue}}%</div>
                <div class="kpi-label">STABILITY INDEX</div>
            </div>
        </div>
        <div class="kpi-card glass">
            <div class="kpi-icon" style="background: #fff7ed; color: #c2410c;">
                <i class="fa-solid fa-clock"></i>
            </div>
            <div class="kpi-data">
                <div class="kpi-value">{{avgCarryOver}}</div>
                <div class="kpi-label">AVG CARRY OVER</div>
            </div>
        </div>
    </div>

    <div class="main-grid">
        <div class="left-panel">
            <div class="chart-section glass">
                <div class="section-badge">DEFECTION TREND</div>
                <div class="chart-container-inner">
                    <div echarts [options]="throughputOption" class="w-full h-full"></div>
                </div>
            </div>
            <div class="table-section glass">
                <table>
                    <thead>
                        <tr>
                            <th>Module Entity</th>
                            <th>Created</th>
                            <th>Resolved</th>
                            <th>Throughput</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of sprintMetrics">
                            <td class="font-bold">{{item.name}}</td>
                            <td>{{item.created}}</td>
                            <td class="text-emerald-600 font-bold">{{item.resolved}}</td>
                            <td class="throughput-rate">{{item.throughputRate}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="right-panel">
            <div class="insights-section glass">
                <div class="section-badge mb-4">ROOT CAUSE DISTRIBUTION</div>
                <div class="chart-container-inner" style="height: 180px;">
                    <div echarts [options]="rcOption" class="w-full h-full"></div>
                </div>
            </div>

            <div class="stability-section-horizontal glass p-4">
              <div class="flex justify-between items-center mb-1">
                  <span class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Platform Stability</span>
                  <span class="text-emerald-600 font-bold text-xs">{{stabilityIndexValue}}%</span>
              </div>
              <div class="progress-bar-container">
                  <div class="progress-bar" [style.width.%]="stabilityIndexValue"></div>
              </div>
            </div>
        </div>
    </div>

    <footer class="mt-auto pt-3 pb-1 flex justify-between items-center border-t border-slate-200">
        <div class="flex items-center">
            <span class="text-[10px] font-black tracking-tighter text-brand-navy uppercase">COGNIZANT</span>
        </div>
        <div class="flex items-center gap-8">
            <span class="text-[0.55rem] font-bold text-slate-400 uppercase tracking-widest">Caterpillar: Confidential Green</span>
            <span class="text-[0.65rem] font-extrabold text-[#94a3b8]">11</span>
        </div>
    </footer>
</div>
