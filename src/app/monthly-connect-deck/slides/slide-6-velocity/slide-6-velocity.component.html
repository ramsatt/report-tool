<div class="slide-container" *ngIf="generalInfo">
    
    <!-- Compact Header -->
    <header class="slide-header">
        <div class="header-left">
            <div class="logo-box">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                </svg>
            </div>
            <div class="header-title-group">
                <h1 class="header-title">Delivery Metrics Summary</h1>
                <div class="header-subtitle">
                    <div class="subtitle-dot"></div>
                    <p class="subtitle-text">Last 6 Months</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Content Grid -->
    <div class="content-grid">
        
        <!-- Performance Section -->
        <section class="performance-card">
            <p class="card-label">Baseline Performance</p>
            <div class="performance-value">
                <span class="value-main">{{ summary.avgVelocity | number:'1.0-0' }}</span>
                <span class="value-decimal">.{{ (summary.avgVelocity % 1 * 10) | number:'1.0-0' }}</span>
                <span class="value-unit">% Avg</span>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar-fill" [style.width.%]="summary.avgVelocity"></div>
            </div>
            <p class="performance-note">{{ summary.description }}</p>
        </section>

        <!-- Charts Area -->
        <section class="chart-card">
            <div class="chart-header">
                <p class="card-label">Velocity Lifecycle Analytics</p>
                <div class="chart-legend">
                    <div class="legend-item">
                        <div class="legend-dot legend-commit"></div>
                        <span class="legend-label">Commit</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot legend-deliver"></div>
                        <span class="legend-label">Deliver</span>
                    </div>
                </div>
            </div>
            <div class="chart-container">
                <div echarts [options]="chartOption" class="chart-echarts"></div>
            </div>
        </section>

        <!-- Ledger Area (Standard Table) -->
        <section class="ledger-card">
            <div class="table-wrapper">
                <table class="standard-table">
                    <thead>
                        <tr>
                            <th class="col-month">Month</th>
                            <th class="col-sprint">Sprint</th>
                            <th class="col-sp">Committed SP</th>
                            <th class="col-sp">Delivered SP</th>
                            <th class="col-pct">Delivery %</th>
                            <th class="col-date">Planned Deployment</th>
                            <th class="col-date">Actual Deployment</th>
                            <th class="col-comment">Comment</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let metric of velocityMetrics">
                            <td *ngIf="metric.monthRowSpan > 0" [attr.rowspan]="metric.monthRowSpan" class="col-month merged-cell">
                                {{ metric.period }}
                            </td>
                            <td class="col-sprint">{{ metric.sprint }}</td>
                            <td class="col-sp">{{ metric.committed }}</td>
                            <td class="col-sp">{{ metric.delivered }}</td>
                            <td class="col-pct">
                                <span class="pct-value" [ngClass]="metric.statusClass">
                                    {{ metric.deliveryPct }}%
                                </span>
                            </td>
                            <td class="col-date">{{ metric.plannedDeployment }}</td>
                            <td class="col-date">{{ metric.actualDeployment }}</td>
                            <td class="col-comment" title="{{ metric.comment }}">{{ metric.comment }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div *ngIf="velocityMetrics.length === 0" class="no-data-msg">
                No velocity strategy data found.
            </div>
        </section>
    </div>
    
    <!-- FOOTER -->
    <footer class="mt-auto pt-3 pb-1 flex justify-between items-center border-t border-slate-200">
        <div class="flex items-center">
            <span class="text-[10px] font-black tracking-tighter text-brand-navy uppercase">COGNIZANT</span>
        </div>
        <div class="flex items-center gap-8">
            <span class="text-[0.55rem] font-bold text-slate-400 uppercase tracking-widest">Caterpillar: Confidential Green</span>
            <span class="text-[0.65rem] font-extrabold text-[#94a3b8]">6</span>
        </div>
    </footer>
</div>
